{"pageProps":{"article":{"id":"compro-union-find","title":"Union-Find - 競プロ実装メモ","description":"競技プログラミング実装メモシリーズ、Union-Find の実装メモです。","createdAt":"2020/07/25","updatedAt":"2020/07/25","content":"<h1>Union-Find - 競プロ実装メモ</h1>\n<h2>概要</h2>\n<p>Union-Find は要素のグループ分けを木構造で管理するデータ構造です。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span> 個の要素があるとして、初期状態ではすべて別々のグループに属しています。\nUnion-Find は主に以下の機能を実現します。</p>\n<ul>\n<li>要素 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> が属するグループと要素 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> が属するグループを結合する</li>\n<li>要素 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> が属するグループの根の要素を取得する</li>\n</ul>\n<h2>実装例</h2>\n<ul>\n<li>union by size と経路圧縮をしています</li>\n</ul>\n<pre class=\"hljs lang-python\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">UnionFind</span>:</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">__init__</span><span class=\"hljs-params\">(self, n)</span>:</span>\n        self.par = [<span class=\"hljs-number\">-1</span>] * n\n        self.size = [<span class=\"hljs-number\">1</span>] * n\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">get_root</span><span class=\"hljs-params\">(self, x)</span>:</span>\n        <span class=\"hljs-keyword\">if</span> self.par[x] == <span class=\"hljs-number\">-1</span>:\n            <span class=\"hljs-keyword\">return</span> x\n        self.par[x] = self.get_root(self.par[x])\n        <span class=\"hljs-keyword\">return</span> self.par[x]\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title\">unite</span><span class=\"hljs-params\">(self, x, y)</span>:</span>\n        rx, ry = self.get_root(x), self.get_root(y)\n        <span class=\"hljs-keyword\">if</span> rx == ry:\n            <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-keyword\">if</span> self.size[ry] &gt; self.size[rx]:\n            rx, ry = ry, rx\n        self.par[ry] = rx\n        self.size[rx] += self.size[ry]\n</pre>\n","tags":["compro"]}},"__N_SSG":true}